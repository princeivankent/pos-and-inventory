<app-page-header title="Low Stock Alerts" subtitle="Products below reorder level">
      <a routerLink="/inventory">
        <p-button label="Back to Inventory" icon="pi pi-arrow-left" severity="secondary" [outlined]="true" />
      </a>
    </app-page-header>

    <div class="card">
      <p-table
        [value]="products()"
        [loading]="loading()"
        [paginator]="true"
        [rows]="15"
        [rowsPerPageOptions]="[15, 30, 50]"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first}â€“{last} of {totalRecords} products"
        dataKey="id"
        [sortField]="'current_stock'"
        [sortOrder]="1"
        styleClass="enhanced-table"
      >
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="name">Product <p-sortIcon field="name" /></th>
            <th>SKU</th>
            <th pSortableColumn="current_stock" style="text-align:right">Current Stock <p-sortIcon field="current_stock" /></th>
            <th style="text-align:right">Reorder Level</th>
            <th>Status</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-p>
          <tr class="table-row">
            <td class="font-medium">{{ p.name }}</td>
            <td>{{ p.sku }}</td>
            <td style="text-align:right">{{ p.current_stock }} {{ p.unit }}</td>
            <td style="text-align:right">{{ p.reorder_level }} {{ p.unit }}</td>
            <td>
              @if (p.current_stock <= 0) {
                <app-status-badge label="Out of Stock" severity="danger" />
              } @else {
                <app-status-badge label="Low Stock" severity="warn" />
              }
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="5" class="empty-state">
              <div class="empty-content">
                <i class="pi pi-check-circle" style="font-size: 3rem; color: #10b981;"></i>
                <h3>All products are well stocked!</h3>
                <p class="text-secondary">
                  Products below reorder level will appear here.
                </p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
