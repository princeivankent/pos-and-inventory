<app-page-header title="Suppliers" subtitle="Manage your product suppliers">
  @if (storeCtx.isAdmin()) {
    <p-button label="Add Supplier" icon="pi pi-plus" (onClick)="openNew()" />
  }
</app-page-header>

<!-- Filter Bar -->
<div class="filter-bar">
  <div class="search-section">
    <span class="p-input-icon-left">
      <i class="pi pi-search"></i>
      <input
        pInputText
        type="text"
        [(ngModel)]="searchQuery"
        (input)="onSearch()"
        placeholder="Search by name or phone..."
      />
    </span>
  </div>

  <div class="page-size-control">
    <p-select
      [(ngModel)]="pageSize"
      [options]="pageSizeOptions"
      optionLabel="label"
      optionValue="value"
      styleClass="page-size-select"
    />
  </div>
</div>

<!-- Supplier Table -->
<div class="card">
  <app-supplier-table
    [suppliers]="suppliers()"
    [loading]="loading()"
    [isAdmin]="storeCtx.isAdmin()"
    [pageSize]="pageSize"
    (edit)="editSupplier($event)"
    (delete)="confirmDeactivate($event)"
  />
</div>

<!-- Form Dialog -->
<app-supplier-form-dialog
  [(visible)]="formDialogVisible"
  [editMode]="editMode"
  [form]="form"
  [saving]="saving()"
  (save)="saveSupplier()"
/>

<p-confirmDialog />
